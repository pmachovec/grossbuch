\newsection{Servlets}
\index{Servlet}
\label{servlet}
A~Java program executed by~an~\hyperref[applicationserver]{application server} (most usually \hyperref[tomcat]{Tomcat}) based on~a~request (theoretically doesn't have to~be~\hyperref[http]{HTTP}, but~nowadays nothing else is~used) from a~client is~called \mbit{servlet}.
\hyperref[webserviceapplication]{Web services} implemented in~Java are~servlets.
The~implementation of~servlets is~said to~use the servlet~\hyperref[api]{API}

For~each servlet there is~a~class implementing the~interface \mbitq{javax.servlet.Servlet}.
This class is~an~entry point of~the~servlet program, sometimes the~class alone is (incorrectly) denoted as~\mbit{servlet}.
It~contains methods (enforced by its interface) that are~triggered when the~servlet is initiated (\itq{void init(ServletConfig config)}), when a~request comes to~it (\itq{void service(ServletRequest request, ServletResponse response)} and~when it's~terminated (\itq{void destroy()}).
Note that even the~\textit{service} method, from which some response is~expected, is~void.
The~response is~written to~a~writer instance of~the~\textit{response} object.

\example
%! language = TEXT
\begin{lstlisting}[language=Java]
    import java.io.PrintWriter;
    import javax.servlet.Servlet;
    import javax.servlet.ServletRequest;
    import javax.servlet.ServletResponse;

    public class ExampleServlet implements Servlet {
        ...
        protected void service(ServletRequest request, ServletResponse response) {
            ...
            PrintWriter out = response.getWriter();
            out.print("...EXAMPLE...");
            out.flush();
        }
        ...
    }
\end{lstlisting}

\newsubsection{Servlet Invocation}
Each servlet class must have~assigned some~URL\@.
When the~\hyperref[applicationserver]{application server} URL, correct port and~the~servlet URL are~invoked (for~example, in~a~web browser address bar), the~\textit{service} method of~the~class is~executed.
From there other classes and~methods can~be invoked.
The~content written to~the~writer of~the~response object is~sent back to~the~invoking client (a~web~browser displays it instead of~a~web~page).
One~servlet can~be configured as~the~default one, this is triggered when no~servlet URL part is~written to the~address~bar.

There already are some classes implementing the~\textit{Servlet} interface.
New~servlet classes are~implemented as~extending these classes.
With this approach a~developer can override only methods he needs, the~original \textit{Servlet} interface doesn't have to be implemented whole again.

\newsubsection{\textit{Service} method VS \textit{doGet} and \textit{doPost}}
\label{servicedopostdoget}
 Today's servlet classes usually extend the~\textit{HttpServlet} class and~the~logic of~servlets is~implemented by~overriding methods \textit{doGet} and~\textit{doPost} from that class, not~the~original \textit{service}.
That's because today's servlets are~triggered by web requests from web browsers, which use the~\hyperref[http]{HTTP protocol}.
This~\hyperref[protocolstandard]{protocol} enables (beside others) two~most common methods of~a~HTTP request -- \textit{GET} and~\textit{POST}.
When an~\hyperref[applicationserver]{application server} gets a~\hyperref[http]{HTTP} request, it~actually triggers the~\textit{service} method, but~it~adds a~parameter with the~method type to~the~\textit{request} object.
Based on~this parameter the~implementation of~the\textit{service} method from the~\textit{HttpServlet} class delegates other parameters to~\textit{doGet} or~\textit{doPost} method, which are~expected to~be overridden by~the~developer (their body is empty in~the~\textit{HttpServlet} class).

When a~servlet is~invoked by~typing its URL to~a~web browser address bar, the~\hyperref[http]{HTTP} request has the~method~\textit{GET}, i.e., the~\textit{doGet} method is~triggered.
Eventual parameters available in~the~\textit{request} object can~be written as~a~part of~the~complete URL written to~the~address bar.
The~\textit{POST} method in~the~request, and~therefore even the~\textit{doPost} method in~the~servlet class, can~be triggered only by submitting a~HTML form configured to~use the~\textit{POST} method or~by~running a~JavaScript function on~the~client side.

\newsection{Java Server Pages (JSP)}
\index{JSP}
\index{Java server pages}
\label{jsp}
When a~\hyperref[http]{HTTP} request to~a~servlet is~sent from a~web browser, the~response is~displayed in~that~browser.
When some meaningful \hyperref[internetweb]{web} page should be displayed, its~whole source code must be written to~the~response, i.e.,~something like this:

%! language = TEXT
\begin{lstlisting}[language=Java]
    import java.io.IOException;
    import java.io.PrintWriter;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class ExampleServlet extends HttpServlet {
        ...
        @>@Override
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException {
            ...
            PrintWriter out = response.getWriter();
            out.print("<html>");
            out.print("<head>");
            ...
            out.flush();
        }
        ...
    }
\end{lstlisting}

\noindent That sucks.
As~a~solution there are~JSP~pages.
A~JSP page is~basically a~HTML page with some advanced features for~interactions with request parameters, executing Java code and~dynamic context generation.
When a~\hyperref[http]{HTTP} request is~sent to~a~JSP page, its~content (dynamically adjusted based on~the~request) is~sent as~the~response (and~displayed in~the~initiating browser).

\warning JSP pages are~very dangerous for~code readability.
They enable mixing five syntaxes -- HTML, CSS, Java, JavaScript and~\hyperref[el]{EL} -- into one~file.
And~although this is considered and~known to~be a~VERY bad practice, you can~be sure that a~stressed and~tired developer, who~is pressed by incompetent managers to~finish work for~three people till yesterday (i.e.,~a~standard developer), will create a~real anarchy with this tool in~his~hands.

\newsubsection{Java Standard Tag Library (JSTL)}
\index{Java standard tag library}
\index{JSTL}
\label{jstl}

\newsubsection{Attribute VS Parameter}
\index{Attribute}
\index{Parameter}
\label{jspattributeparameter}

\newsubsection{Namespaces}
\index{Namespace}

\newsubsection{Expression Language (EL)}
\index{Expression language}
\index{EL}
\label{el}
